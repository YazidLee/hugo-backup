<!DOCTYPE html>
<html lang="cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Hello Hugo | 仙羡小站</title>
<meta name="keywords" content="Hugo" />
<meta name="description" content="以前自己折腾过各种平台的博客，WordPress、Hexo、Jekyll等，但最终都没有坚持把自己的博客搭建完成，不是这里效果不好，自己折腾不出来，然后一怒之下就弃了，要么就是工作出差，回来后就忘了，总之放弃是件简单的事情。
刚好处于工作真空期，想把一些平时学习的零碎内容整理一下，这次就坚持把这个博客完成了。这里就简单介绍下整个流程，及其中的一些坑和细节。篇幅较长，过程中可能有部分遗漏，轻喷。
首先是这次使用的博客平台，选择Hugo的理由很简单，因为没用过它，觉得新鲜，但实际上使用流程和搭建过程其实和以前接触过的静态站点生成框架大同小异。个人电脑环境是Win10，以前安装过scoop，因此安装方法如下：
1 2 3 4  scoop install hugo # 检查hubo是否安装完成 hugo version hugo v0.82.1-60618210 windows/amd64 BuildDate=2021-04-20T11:02:50Z VendorInfo=gohugoio   其他系统环境下安装方式见官网。
Hello Hugo 开始使用Hugo创建一个新站点hello-hugo (这个名字各位自己决定，只要当前工作目录下不存在非空的重名子目录):
1  hugo new site hello-hugo   执行成功后，Hugo会给出温馨的提示：
 Just a few more steps and you&rsquo;re ready to go:
 Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the &ldquo;hugo new theme &rdquo; command.">
<meta name="author" content="SadBird">
<link rel="canonical" href="https://www.liyangjie.cn:4443/posts/hellohugo/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.a6642136b9bce4424ba83e80c9064eb7c1c6579247ab6ba6d441c6ec5fa68331.css" integrity="sha256-pmQhNrm85EJLqD6AyQZOt8HGV5JHq2um1EHG7F&#43;mgzE=" rel="preload stylesheet" as="style">
<link rel="preload" href="http://images.liyangjie.cn/image/earlybirds.png" as="image">
<link rel="icon" href="https://www.liyangjie.cn:4443/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.liyangjie.cn:4443/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.liyangjie.cn:4443/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.liyangjie.cn:4443/favicon/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.liyangjie.cn:4443/favicon/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.82.1" />
<meta property="og:title" content="Hello Hugo" />
<meta property="og:description" content="以前自己折腾过各种平台的博客，WordPress、Hexo、Jekyll等，但最终都没有坚持把自己的博客搭建完成，不是这里效果不好，自己折腾不出来，然后一怒之下就弃了，要么就是工作出差，回来后就忘了，总之放弃是件简单的事情。
刚好处于工作真空期，想把一些平时学习的零碎内容整理一下，这次就坚持把这个博客完成了。这里就简单介绍下整个流程，及其中的一些坑和细节。篇幅较长，过程中可能有部分遗漏，轻喷。
首先是这次使用的博客平台，选择Hugo的理由很简单，因为没用过它，觉得新鲜，但实际上使用流程和搭建过程其实和以前接触过的静态站点生成框架大同小异。个人电脑环境是Win10，以前安装过scoop，因此安装方法如下：
1 2 3 4  scoop install hugo # 检查hubo是否安装完成 hugo version hugo v0.82.1-60618210 windows/amd64 BuildDate=2021-04-20T11:02:50Z VendorInfo=gohugoio   其他系统环境下安装方式见官网。
Hello Hugo 开始使用Hugo创建一个新站点hello-hugo (这个名字各位自己决定，只要当前工作目录下不存在非空的重名子目录):
1  hugo new site hello-hugo   执行成功后，Hugo会给出温馨的提示：
 Just a few more steps and you&rsquo;re ready to go:
 Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the &ldquo;hugo new theme &rdquo; command." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.liyangjie.cn:4443/posts/hellohugo/" />
<meta property="og:image" content="https://d33wubrfki0l68.cloudfront.net/c38c7334cc3f23585738e40334284fddcaf03d5e/2e17c/images/hugo-logo-wide.svg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-28T01:26:43&#43;08:00" />
<meta property="article:modified_time" content="2021-08-28T01:26:43&#43;08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://d33wubrfki0l68.cloudfront.net/c38c7334cc3f23585738e40334284fddcaf03d5e/2e17c/images/hugo-logo-wide.svg" />
<meta name="twitter:title" content="Hello Hugo"/>
<meta name="twitter:description" content="以前自己折腾过各种平台的博客，WordPress、Hexo、Jekyll等，但最终都没有坚持把自己的博客搭建完成，不是这里效果不好，自己折腾不出来，然后一怒之下就弃了，要么就是工作出差，回来后就忘了，总之放弃是件简单的事情。
刚好处于工作真空期，想把一些平时学习的零碎内容整理一下，这次就坚持把这个博客完成了。这里就简单介绍下整个流程，及其中的一些坑和细节。篇幅较长，过程中可能有部分遗漏，轻喷。
首先是这次使用的博客平台，选择Hugo的理由很简单，因为没用过它，觉得新鲜，但实际上使用流程和搭建过程其实和以前接触过的静态站点生成框架大同小异。个人电脑环境是Win10，以前安装过scoop，因此安装方法如下：
1 2 3 4  scoop install hugo # 检查hubo是否安装完成 hugo version hugo v0.82.1-60618210 windows/amd64 BuildDate=2021-04-20T11:02:50Z VendorInfo=gohugoio   其他系统环境下安装方式见官网。
Hello Hugo 开始使用Hugo创建一个新站点hello-hugo (这个名字各位自己决定，只要当前工作目录下不存在非空的重名子目录):
1  hugo new site hello-hugo   执行成功后，Hugo会给出温馨的提示：
 Just a few more steps and you&rsquo;re ready to go:
 Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the &ldquo;hugo new theme &rdquo; command."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://www.liyangjie.cn:4443/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Hello Hugo",
      "item": "https://www.liyangjie.cn:4443/posts/hellohugo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hello Hugo",
  "name": "Hello Hugo",
  "description": "以前自己折腾过各种平台的博客，WordPress、Hexo、Jekyll等，但最终都没有坚持把自己的博客搭建完成，不是这里效果不好，自己折腾不出来，然后一怒之下就弃了，要么就是工作出差，回来后就忘了，总之放弃是件简单的事情。\n刚好处于工作真空期，想把一些平时学习的零碎内容整理一下，这次就坚持把这个博客完成了。这里就简单介绍下整个流程，及其中的一些坑和细节。篇幅较长，过程中可能有部分遗漏，轻喷。\n首先是这次使用的博客平台，选择Hugo的理由很简单，因为没用过它，觉得新鲜，但实际上使用流程和搭建过程其实和以前接触过的静态站点生成框架大同小异。个人电脑环境是Win10，以前安装过scoop，因此安装方法如下：\n1 2 3 4  scoop install hugo # 检查hubo是否安装完成 hugo version hugo v0.82.1-60618210 windows/amd64 BuildDate=2021-04-20T11:02:50Z VendorInfo=gohugoio   其他系统环境下安装方式见官网。\nHello Hugo 开始使用Hugo创建一个新站点hello-hugo (这个名字各位自己决定，只要当前工作目录下不存在非空的重名子目录):\n1  hugo new site hello-hugo   执行成功后，Hugo会给出温馨的提示：\n Just a few more steps and you\u0026rsquo;re ready to go:\n Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026ldquo;hugo new theme \u0026rdquo; command.",
  "keywords": [
    "Hugo"
  ],
  "articleBody": "以前自己折腾过各种平台的博客，WordPress、Hexo、Jekyll等，但最终都没有坚持把自己的博客搭建完成，不是这里效果不好，自己折腾不出来，然后一怒之下就弃了，要么就是工作出差，回来后就忘了，总之放弃是件简单的事情。\n刚好处于工作真空期，想把一些平时学习的零碎内容整理一下，这次就坚持把这个博客完成了。这里就简单介绍下整个流程，及其中的一些坑和细节。篇幅较长，过程中可能有部分遗漏，轻喷。\n首先是这次使用的博客平台，选择Hugo的理由很简单，因为没用过它，觉得新鲜，但实际上使用流程和搭建过程其实和以前接触过的静态站点生成框架大同小异。个人电脑环境是Win10，以前安装过scoop，因此安装方法如下：\n1 2 3 4  scoop install hugo # 检查hubo是否安装完成 hugo version hugo v0.82.1-60618210 windows/amd64 BuildDate=2021-04-20T11:02:50Z VendorInfo=gohugoio   其他系统环境下安装方式见官网。\nHello Hugo 开始使用Hugo创建一个新站点hello-hugo (这个名字各位自己决定，只要当前工作目录下不存在非空的重名子目录):\n1  hugo new site hello-hugo   执行成功后，Hugo会给出温馨的提示：\n Just a few more steps and you’re ready to go:\n Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the “hugo new theme ” command. Perhaps you want to add some content. You can add single files with “hugo new .”. Start the built-in live server via “hugo server”.   等会我们就按这个顺序完成站点的创建。先看看执行完hugo new site命令后，Hugo为我们做了什么。\n工作目录内容 进入hello-hugo目录，Hugo生成的内容如下图所示：\n这些大致作用如下：\n archetypes：存放博客的模板，默认提供了一个default.md作为所有博客的模板 content：顾名思义，存放我们所有的博客正文 data：存放一些数据，如xml、json等 layouts：与博客页面布局相关的内容，如博客网页中的header、footer等 static：存放静态资源，如图标、图片等 themes：主题相关 config.toml：站点、主题等相关内容的配置文件，它支持yaml、toml和json格式，后续将会一直和这个文件打交道  除了上述几个目录之外，Hugo还规定了许多其他目录用于提供不同的作用，如assets、i18n等。\n主题下载和使用 根据提示，要使用Hugo，我们必须先下载主题(或自己创建主题)，这里我选择自己比较喜欢的PaperMod。\n先到PaperMod Giuhub，根据官方文档的提示进行主题的下载。PaperMod官方提供了3种下载方式，这里推荐第二种，以git submodule的方式下载。\n进入hello-hugo目录，分别执行如下命令：\n1 2 3  git init # 将hello-hugo初始化为git仓库 git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod --depth=1 # 将PaperMod作为hello-hugo依赖的submodule git submodule update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically)   完成后，会在themes目录下会多出一个PaperMod目录：\n可以发现，这个目录的结构与我们自己的hello-hugo目录十分相似，各目录的作用也基本一致。\n随后，为了使用这个主题，需要在config.toml中激活，为了保持和PaperMod一致，这里将这个文件的后缀修改为.yml，在config.yml中配置如下：\n1 2 3 4  baseURL: \"http://example.org/\" languageCode: \"en-us\" title: \"Hello Hugo\" theme: \"PaperMod\"   这时候主题已经激活了，我们先往博客中添加一篇文章，首先创建名为posts的section：\n1  hugo new section posts   完成后，在content目录下创建了一个名为posts的目录，这就是我们存放文章的目录。随后创建一篇文章：\n1 2  hugo new posts/HelloHugo1.md hugo new posts/HelloHugo2.md   进入posts目录，编辑两个.md文件，写点内容：\n1 2 3 4 5 6 7 8  --- title: \"HelloHugo1\" date: 2021-08-29T21:13:55+08:00 draft: false --- # Hello, Hugo1 你好，雨果   1 2 3 4 5 6 7 8  --- title: \"HelloHugo2\" date: 2021-08-29T21:18:38+08:00 draft: false --- # Hello, Hugo2 你好，雨果   文件头部为Hugo自动添加的内容，它来自archetypes目录中的default.md模板，注意draft属性，默认值为true表示文章处于草稿状态，该状态下的文档不会参与站点的生成，也就是说网站上没有草稿文章，所以此处需要将其先设置为false。\n现在可以使用Hugo内置的Server预览一下成果(工作目录必须在hugo-hello)：\n1  hugo server   😭emmmmmmm，怎么说呢，有成果出来了，但是效果好像不太好，别急，接下来我们慢慢完善。\n主题配置完善 基本上每个主题都会提供相应的demo，PaperMod的demo如下：\n我们现在就以它为目标进行改进。\n学习的最快方式就是模仿，所以我们直接到demo的github(注意是PaperMod demo的github，而不是PaperMod的github)上把config.yml抄过来。\n可以注意到前几行配置我们就新增了一条paginate: 5，其他保持不变，从enableInlineShortcodes开始都是来自demo的配置。\nlanguages、archives、search 在demo的languages的配置段中，有en、fr和fa3块，它们使用的主题Mode不同，且包含部分国际化的配置，我们暂时只需要使用en，可以将fr和fa注释或者直接删除掉。\nen下最重要的就是menu配置了，它表示了导航栏显示的内容，demo中提供了最常用的4项，即Archive、Search、Tags及Categories。每项中包含一个weight，表示它们在导航栏中的显示顺序，越小越靠前。\n根据PaperMod官方使用文档的描述，要使用Archive和Search，需要进行以下操作：\n  在content下增加archives.md文件，具体位置如下：\n1 2 3 4 5 6 7 8  . ├── config.yml ├── content/ │ ├── archives.md   archives.md内容为：\n1 2 3 4 5 6  --- title: \"Archive\" layout: \"archives\" url: \"/archives/\" summary: archives ---     在config.yml中新增如下内容，demo中已经配置好的，这步可以跳过：\n1 2 3 4 5  outputs: home: - HTML - RSS - JSON # is necessary   同样在content新增一个search.md，内容如下：\n1 2 3 4 5 6 7  --- title: \"Search\" # in any language you want layout: \"search\" # is necessary # url: \"/archive\" # description: \"Description for Search\" summary: \"search\" ---     完成上述操作后，再看看效果：\n😏像那么回事了吧！\nparams params包括了PaperMod主题中的重要配置参数，下面举几个例子来进行说明，其他详细配置用法可以参照官方说明，也可以自己试试，大部分配置都是见名知意的。\n主题样式相关   defaultTheme：设置白色主题或者黑色主题，设置为auto则表示跟随浏览器\n  disableThemeToggle:：是否允许白色主题和黑色主题进行手动切换，设置成true则在网页顶部提供切换按钮\n  homeInfoParams、socialIcons：这两参数配置的首页显示的内容，修改内容如下：\n1 2 3 4 5 6 7 8 9 10 11 12  homeInfoParams: Title: \"Hello Hugo\" Content: Lorem ipsum dolor sit amet, consectetuer adipiscing elit, - sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. socialIcons: - name: github url: \"https://github.com/adityatelange/hugo-PaperMod\" - name: telegram url: \"https://ko-fi.com/adityatelange\" - name: RsS url: \"index.xml\"   结果如下：\n关于socialIcons参数，PaperMod官网给出了具体的参照表。\n  网站图标相关参数如下，可以指定网络路径或本地路径：\n1 2 3 4 5 6  assets: favicon: \"\" favicon16x16: \"\" favicon32x32: \"\" apple_touch_icon: \"\" safari_pinned_tab: \"\"     博客内容相关   ShowShareButtons是否显示分享博客按钮，具体按钮的设定仍可参照PaperMod官网\n  ShowReadingTime是否显示文章阅读时间\n  ShowBreadCrumbs 是否显示面包屑\n  ShowCodeCopyButtons是否显示代码复制按钮\n  ShowToc是否显示文章目录\n  博客封面相关：\n1 2 3 4 5  cover: responsiveImages: false # 仅仅用在Page Bundle情况下，此处不讨论 hidden: false # hide everywhere but not in structured data 是否在下面两种情况下显示 hiddenInList: false # hide on list pages and home 是否在列表视图中显示 hiddenInSingle: false # hide on single page 是否在单页视图中显示   为了测试，我将后面3个配置项全部设置为true，并在两篇测试博客中修改front matter(就是博客最上方的数据):\n1 2 3 4 5 6 7 8 9  --- title: \"HelloHugo1\" date: 2021-08-29T21:13:55+08:00 draft: cover: image: \"https://images.liyangjie.cn/Sekiro_01.jpg\" alt: \"替换文本\" caption: \"封面标题\" ---   1 2 3 4 5 6 7 8 9  --- title: \"HelloHugo2\" date: 2021-08-29T21:18:38+08:00 draft: cover: image: \"https://images.liyangjie.cn/Sekiro_02.jpg\" alt: \"替换文本\" caption: \"封面标题\" ---   再来看看结果，是不是有点味道了：\n  分类相关 默认情况下，Hugo支持categories、tags两个级别的分类，通过配置新增更多的分类：\n1 2 3 4  taxonomies: category: categories tag: tags series: series   这里又配置了一个series的分类维度，可以在博客的front matter中使用：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  --- title: \"HelloHugo1\" date: 2021-08-29T21:13:55+08:00 draft: cover: image: \"https://images.liyangjie.cn/Sekiro_01.jpg\" alt: \"替换文本\" caption: \"封面标题\" categories: - Hugo tags: - Hugo series: - Hugo ---   这时候再进入网站的Tags导航项，就可以看到我们的标签和数量了：\n代码样式相关 PaperMod0配置代码显示样式如下，这里是我个人使用的配置：\n1 2 3 4 5 6 7 8 9 10 11  markup: goldmark: renderer: unsafe: true highlight: # anchorLineNos: true codeFences: true guessSyntax: true lineNos: true # noClasses: false style: monokai   将lineNos设置为true后，会产生bug，官方提供了解决方案：\n在hugo-hello，即工作目录下创建assets/css/custom.css文件，在文件中添加如下内容即可：\n1 2 3  .chroma { background-color: unset; }   现在往第一篇博客中添加一个代码段如下：\n1 2 3 4 5  ```java public V put(K key, V value) { return putVal(hash(key), key, value, false, true); } ```   显示效果如图：\n增加评论区 我选择使用的是Valine，前置工作需要在LeanCloud上注册并创建应用，获取到相关的AppID和AppKey，具体流程请参照Valine官方网站。\n获取到这两个参数后，根据PaperMod官方文档的指示，创建layouts/partials/comments.html文件，partials路径不存在就自己创建，在文件中添加以下内容：\n1 2 3 4 5 6 7 8 9 10 11  {{ $valinejs := resources.Get \"js/Valine.min.js\" }} script src='{{ $valinejs.RelPermalink }}'script div id=\"vcomments\"div script new Valine({ el: '#vcomments', appId: '这里是你的AppID', appKey: '这里是你的AppKey', placeholder: '来都来了，说两句~' }) script   随后创建assets/js/Valine.min.js，将CDN中的内容全部拷贝到该文件中，保存。\n在config.yml配置文件中设置评论开启即可，直接查找comments就可以定位到该配置的位置了，默认是关闭状态：\n1  comments: true   最后来看看效果：\n配置入门大致就先讲到这里，下面简单介绍下我的站点部署方式。\n部署相关 Hugo与Hexo类似，提供了直接部署为Github Pages的方式，比较简单，请直接移步到官网。\n但我自己想折腾折腾，以前使用Hexo的时候在自己的云主机上进行了部署，当时域名整了好久(国内域名，需要备案)，等域名搞定，黄花菜都凉了，所以这次刚好手头还保留着一台云主机，域名也一直在续费，就借此机会再折腾折腾。\n准备工作 软件环境准备  云主机的操作系统为Debian 4.19.37-5+deb10u2 (2019-08-08) x86_64 GNU/Linux，其他发行版也都可以 静态资源服务器nginx/1.20.1 git/2.20.1  域名、证书准备   准备好一个域名，并DNS解析至云服务器，国内需要走备案审批流程，国外域名则不需要，大家自行斟酌\n  证书可选择各平台免费的DV证书，这里我随便找了一个腾讯云的SSL证书，品牌为TrustAsia，有效期一年\n  git仓库及钩子 准备充分后，先在服务器上新建一个名为git的用户专门用于git同步：\n1  sudo adduser git   为了安全，修改分配给该用户的shell环境，编辑/etc/passwd文件，在末尾可以找到我们新增的git用户，修改后效果如下：\n1 2 3  ... ... # 修改前为 git❌1001:1001:,,,:/home/git:/bin/bash git❌1001:1001:,,,:/home/git:/usr/bin/git-shell   在自己的**客户端(Win10)**准备好SSH公钥，具体流程可以参照Github教程。完成后，将公钥拷贝至服务器/home/git/.ssh/authorized_keys文件里，该文件中若有其他公钥，则在末尾换行后添加即可。\n在适当目录创建hugo的裸仓库：\n1  git init --bare hello-hugo.git   将该目录授权给刚创建好的git用户\n1  sudo chown -R git:git hello-hugo.git   现在服务端的git仓库已经完成了，我们回到客户端。\n进入hello-hugo目录，执行git初始化命令，将当前目录作为版本管理仓库：\n1  git init   然后将当前目录及其子目录下的所有文件纳入版本管理，并提交到git本地仓库：\n1 2  git add . git commit -m \"Hello, hugo\"   将当前仓库关联到我们上面创建好的远程仓库，由于已经配置了SSH公钥，可以使用ssh协议：\n1 2  git remote add origin ssh://git@your.domain:port/path/to/hello-hugo.git git push --set-upstream origin master   远程仓库地址中的git为我们上面在服务器上创建的用户，your.domai表示你自己的域名，port为服务端的ssh端口，默认22可以不写，但是不为22的时候一定要使用如上的完整路径，此时ssh://不可省略。\n我们已经完成了远程仓库和本地仓库的上下游关系关联。\n为了方便每次提交文件后将静态目录自动部署到nginx，选择用git hook在post-receive阶段将仓库中的/public整体移动到nginx指定路径。\n再切回到服务端，进入hello-hugo.git目录，可以看到该目录下有个hooks目录，里面存放的就是git支持的所有钩子，git官方在里面已经放了很多.sample结尾的示例，我们只选择使用post-receive钩子。创建post-receive文件，并使用vim进行修改，修改内容如下：\n1 2  #!/bin/bash git --work-tree=/usr/share/nginx/hello-hugo --git-dir=/path/to/hello-hugo.git checkout -f   其中--work-tree为nginx中要配置的静态资源路径，请确保对于这个路径，我们上面创建的git用户需要有写入权限，具体命令参照上面的hello-hugo.git配置；--git-dir就是服务端的hello-hugo.git仓库路径。\n在客户端我们新建一篇名为HelloHugo3.md的博客，记得把draft设置为false，然后往里面加点内容。同样在客户端进入hello-hugo目录，执行hugo命令，该命令的作用是将所有的资源生成为静态站点，并将站点存放在hello-hugo的public目录下：\n1  hugo # 生成站点   再执行git操作：\n1 2 3  git add . git commit -m \"publish site\" git push # 这个客户端操作将会触发服务端执行post-receive脚本   一切正常的话，服务端的/usr/share/nginx/hello-hugo目录下将会和我们的客户端工作目录一致(空目录和submodule不会被git纳入版本控制，因此data、static、themes目录不会同步到服务器)。\nnginx配置 上传SSL证书至/etc/nginx/cert目录下，nginx使用的格式为：\n your.domain_bundle.crt  your.domain.key  进入nginx配置目录/etc/nginx/conf.d，新建hello-hugo.conf文件，内容如下，端口号和路径可以根据实际情况进行修改，保证没有被占用：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  server { listen 443 ssl; # https端口号，默认为443，可以自己修改  server_name your.domain; # 域名，与申请证书时候使用的域名要一致  # https相关配置  ssl_certificate cert/your.domain_bundle.crt; ssl_certificate_key cert/your.domain.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; # 这个路径就是上面我们的git hook指定的路径，再接上一个public  root /usr/share/nginx/hello-hugo/public; # 默认查找路径下的index.html  location / { index index.html index.htm; } # 默认的404页面  error_page 404 /404.html; location = /40x.html { } } server { listen 80; # 端口号可以自己修改  server_name your.domain; # 域名，与申请证书时候使用的域名要一致  # 将http重定向到https，host后面的端口号与上一个server的端口号保持一致即可  return 301 https://$host:443$request_uri; }   最后，开启nginx：\n1  nginx   客户端打开浏览器，输入你的域名(默认80端口可以不写，否则必须写)，能够成功跳转到https，地址栏能够显示小锁(小锁表示网站使用的证书是安全的)就表示已经成功了：\n留个坑 至此，Hugo从入门部署已经完成了，关于Hugo的使用细节没有覆盖到，主要是我自己也才刚开始使用，后续会慢慢积累和整理，争取把记录生活的习惯坚持下去，共勉😎。\n",
  "wordCount" : "911",
  "inLanguage": "cn",
  "image":"https://d33wubrfki0l68.cloudfront.net/c38c7334cc3f23585738e40334284fddcaf03d5e/2e17c/images/hugo-logo-wide.svg","datePublished": "2021-08-28T01:26:43+08:00",
  "dateModified": "2021-08-28T01:26:43+08:00",
  "author":{
    "@type": "Person",
    "name": "SadBird"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.liyangjie.cn:4443/posts/hellohugo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "仙羡小站",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.liyangjie.cn:4443/favicon/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.liyangjie.cn:4443/" accesskey="h" title="仙羡小站 (Alt + H)">
                <img src="http://images.liyangjie.cn/image/earlybirds.png" alt="logo" aria-label="logo"
                    height="30">仙羡小站</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.liyangjie.cn:4443/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://www.liyangjie.cn:4443/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://www.liyangjie.cn:4443/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://www.liyangjie.cn:4443/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.liyangjie.cn:4443/">Home</a>&nbsp;»&nbsp;<a href="https://www.liyangjie.cn:4443/posts/">Posts</a></div>
    <h1 class="post-title">
      Hello Hugo
    </h1>
    <div class="post-meta">August 28, 2021&nbsp;·&nbsp;5 min&nbsp;·&nbsp;SadBird
</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://d33wubrfki0l68.cloudfront.net/c38c7334cc3f23585738e40334284fddcaf03d5e/2e17c/images/hugo-logo-wide.svg" alt="Hugo">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#hello-hugo" aria-label="Hello Hugo">Hello Hugo</a><ul>
                        
                <li>
                    <a href="#%e5%b7%a5%e4%bd%9c%e7%9b%ae%e5%bd%95%e5%86%85%e5%ae%b9" aria-label="工作目录内容">工作目录内容</a></li>
                <li>
                    <a href="#%e4%b8%bb%e9%a2%98%e4%b8%8b%e8%bd%bd%e5%92%8c%e4%bd%bf%e7%94%a8" aria-label="主题下载和使用">主题下载和使用</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%b8%bb%e9%a2%98%e9%85%8d%e7%bd%ae%e5%ae%8c%e5%96%84" aria-label="主题配置完善">主题配置完善</a><ul>
                        
                <li>
                    <a href="#languagesarchivessearch" aria-label="languages、archives、search">languages、archives、search</a></li>
                <li>
                    <a href="#params" aria-label="params">params</a><ul>
                        
                <li>
                    <a href="#%e4%b8%bb%e9%a2%98%e6%a0%b7%e5%bc%8f%e7%9b%b8%e5%85%b3" aria-label="主题样式相关">主题样式相关</a></li>
                <li>
                    <a href="#%e5%8d%9a%e5%ae%a2%e5%86%85%e5%ae%b9%e7%9b%b8%e5%85%b3" aria-label="博客内容相关">博客内容相关</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%88%86%e7%b1%bb%e7%9b%b8%e5%85%b3" aria-label="分类相关">分类相关</a></li>
                <li>
                    <a href="#%e4%bb%a3%e7%a0%81%e6%a0%b7%e5%bc%8f%e7%9b%b8%e5%85%b3" aria-label="代码样式相关">代码样式相关</a></li>
                <li>
                    <a href="#%e5%a2%9e%e5%8a%a0%e8%af%84%e8%ae%ba%e5%8c%ba" aria-label="增加评论区">增加评论区</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%83%a8%e7%bd%b2%e7%9b%b8%e5%85%b3" aria-label="部署相关">部署相关</a><ul>
                        
                <li>
                    <a href="#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c" aria-label="准备工作">准备工作</a><ul>
                        
                <li>
                    <a href="#%e8%bd%af%e4%bb%b6%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87" aria-label="软件环境准备">软件环境准备</a></li>
                <li>
                    <a href="#%e5%9f%9f%e5%90%8d%e8%af%81%e4%b9%a6%e5%87%86%e5%a4%87" aria-label="域名、证书准备">域名、证书准备</a></li></ul>
                </li>
                <li>
                    <a href="#git%e4%bb%93%e5%ba%93%e5%8f%8a%e9%92%a9%e5%ad%90" aria-label="git仓库及钩子">git仓库及钩子</a></li>
                <li>
                    <a href="#nginx%e9%85%8d%e7%bd%ae" aria-label="nginx配置">nginx配置</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%95%99%e4%b8%aa%e5%9d%91" aria-label="留个坑">留个坑</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>以前自己折腾过各种平台的博客，WordPress、Hexo、Jekyll等，但最终都没有坚持把自己的博客搭建完成，不是这里效果不好，自己折腾不出来，然后一怒之下就弃了，要么就是工作出差，回来后就忘了，总之放弃是件简单的事情。</p>
<p>刚好处于工作真空期，想把一些平时学习的零碎内容整理一下，这次就坚持把这个博客完成了。这里就简单介绍下整个流程，及其中的一些坑和细节。篇幅较长，过程中可能有部分遗漏，轻喷。</p>
<p>首先是这次使用的博客平台，选择<a href="https://gohugo.io/">Hugo</a>的理由很简单，因为没用过它，觉得新鲜，但实际上使用流程和搭建过程其实和以前接触过的静态站点生成框架大同小异。个人电脑环境是Win10，以前安装过<code>scoop</code>，因此安装方法如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">scoop install hugo
<span style="color:#75715e"># 检查hubo是否安装完成</span>
hugo version
hugo v0.82.1-60618210 windows/amd64 BuildDate<span style="color:#f92672">=</span>2021-04-20T11:02:50Z VendorInfo<span style="color:#f92672">=</span>gohugoio
</code></pre></td></tr></table>
</div>
</div><p>其他系统环境下安装方式见<a href="https://gohugo.io/getting-started/installing/">官网</a>。</p>
<h1 id="hello-hugo">Hello Hugo<a hidden class="anchor" aria-hidden="true" href="#hello-hugo">#</a></h1>
<p>开始使用Hugo创建一个新站点<code>hello-hugo</code> (这个名字各位自己决定，只要当前工作目录下不存在非空的重名子目录):</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hugo new site hello-hugo
</code></pre></td></tr></table>
</div>
</div><p>执行成功后，Hugo会给出温馨的提示：</p>
<blockquote>
<p>Just a few more steps and you&rsquo;re ready to go:</p>
<ol>
<li>Download a theme into the same-named folder.<br/>
Choose a theme from <a href="https://themes.gohugo.io/">https://themes.gohugo.io/</a> or create your own with the &ldquo;hugo new theme <THEMENAME>&rdquo; command.</li>
<li>Perhaps you want to add some content. You can add single files with &ldquo;hugo new <SECTIONNAME>&lt;FILENAME&gt;.<FORMAT>&rdquo;.</li>
<li>Start the built-in live server via &ldquo;hugo server&rdquo;.</li>
</ol>
</blockquote>
<p>等会我们就按这个顺序完成站点的创建。先看看执行完<code>hugo new site</code>命令后，Hugo为我们做了什么。</p>
<h2 id="工作目录内容">工作目录内容<a hidden class="anchor" aria-hidden="true" href="#工作目录内容">#</a></h2>
<p>进入<code>hello-hugo</code>目录，Hugo生成的内容如下图所示：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_init_directory.png#center" alt=""  />
</p>
<p>这些大致作用如下：</p>
<ul>
<li><code>archetypes</code>：存放博客的模板，默认提供了一个<code>default.md</code>作为所有博客的模板</li>
<li><code>content</code>：顾名思义，存放我们所有的博客正文</li>
<li><code>data</code>：存放一些数据，如<code>xml</code>、<code>json</code>等</li>
<li><code>layouts</code>：与博客页面布局相关的内容，如博客网页中的<code>header</code>、<code>footer</code>等</li>
<li><code>static</code>：存放静态资源，如图标、图片等</li>
<li><code>themes</code>：主题相关</li>
<li><code>config.toml</code>：站点、主题等相关内容的配置文件，它支持<code>yaml</code>、<code>toml</code>和<code>json</code>格式，后续将会一直和这个文件打交道</li>
</ul>
<p>除了上述几个目录之外，Hugo还规定了许多其他目录用于提供不同的作用，如<code>assets</code>、<code>i18n</code>等。</p>
<h2 id="主题下载和使用">主题下载和使用<a hidden class="anchor" aria-hidden="true" href="#主题下载和使用">#</a></h2>
<p>根据提示，要使用Hugo，我们必须先下载<a href="https://themes.gohugo.io/">主题</a><del>(或自己创建主题)</del>，这里我选择自己比较喜欢的<a href="https://themes.gohugo.io/themes/hugo-papermod/">PaperMod</a>。</p>
<p>先到<a href="https://github.com/adityatelange/hugo-PaperMod">PaperMod Giuhub</a>，根据官方文档的提示进行主题的下载。PaperMod官方提供了3种下载方式，这里推荐第二种，以<code>git submodule</code>的方式下载。</p>
<p>进入<code>hello-hugo</code>目录，分别执行如下命令：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git init <span style="color:#75715e"># 将hello-hugo初始化为git仓库</span>
git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> <span style="color:#75715e"># 将PaperMod作为hello-hugo依赖的submodule</span>
git submodule update --init --recursive <span style="color:#75715e"># needed when you reclone your repo (submodules may not get cloned automatically)</span>
</code></pre></td></tr></table>
</div>
</div><p>完成后，会在<code>themes</code>目录下会多出一个<code>PaperMod</code>目录：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_theme_directory.png#center" alt=""  />
</p>
<p>可以发现，这个目录的结构与我们自己的<code>hello-hugo</code>目录十分相似，各目录的作用也基本一致。</p>
<p>随后，为了使用这个主题，需要在<code>config.toml</code>中激活，为了保持和PaperMod一致，这里将这个文件的后缀修改为<code>.yml</code>，在<code>config.yml</code>中配置如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">baseURL</span>: <span style="color:#e6db74">&#34;http://example.org/&#34;</span>
<span style="color:#f92672">languageCode</span>: <span style="color:#e6db74">&#34;en-us&#34;</span>
<span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;Hello Hugo&#34;</span>
<span style="color:#f92672">theme</span>: <span style="color:#e6db74">&#34;PaperMod&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>这时候主题已经激活了，我们先往博客中添加一篇文章，首先创建名为<code>posts</code>的<code>section</code>：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hugo new section posts
</code></pre></td></tr></table>
</div>
</div><p>完成后，在<code>content</code>目录下创建了一个名为<code>posts</code>的目录，这就是我们存放文章的目录。随后创建一篇文章：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hugo new posts/HelloHugo1.md
hugo new posts/HelloHugo2.md
</code></pre></td></tr></table>
</div>
</div><p>进入<code>posts</code>目录，编辑两个<code>.md</code>文件，写点内容：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">---
title: &#34;HelloHugo1&#34;
date: 2021-08-29T21:13:55+08:00
draft: false
---

# Hello, Hugo1
你好，雨果
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">---
title: &#34;HelloHugo2&#34;
date: 2021-08-29T21:18:38+08:00
draft: false
---

# Hello, Hugo2
你好，雨果
</code></pre></td></tr></table>
</div>
</div><p>文件头部为Hugo自动添加的内容，它来自<code>archetypes</code>目录中的<code>default.md</code>模板，注意<code>draft</code>属性，默认值为<code>true</code>表示文章处于草稿状态，该状态下的文档不会参与站点的生成，也就是说网站上没有草稿文章，所以此处需要将其先设置为<code>false</code>。</p>
<p>现在可以使用Hugo内置的Server预览一下成果(工作目录必须在<code>hugo-hello</code>)：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hugo server
</code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_PaperMod_init.png#center" alt=""  />
</p>
<p>😭emmmmmmm，怎么说呢，有成果出来了，但是效果好像不太好，别急，接下来我们慢慢完善。</p>
<h1 id="主题配置完善">主题配置完善<a hidden class="anchor" aria-hidden="true" href="#主题配置完善">#</a></h1>
<p>基本上每个主题都会提供相应的demo，PaperMod的<a href="https://adityatelange.github.io/hugo-PaperMod/">demo</a>如下：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_PaperMod_demo.png#center" alt=""  />
</p>
<p>我们现在就以它为目标进行改进。</p>
<p>学习的最快方式就是模仿，所以我们直接到<a href="https://adityatelange.github.io/hugo-PaperMod/">demo</a>的github(注意是PaperMod demo的github，而不是PaperMod的github)上把<code>config.yml</code>抄过来。</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_PaperMod_demo_config.png#center" alt=""  />
</p>
<p>可以注意到前几行配置我们就新增了一条<code>paginate: 5</code>，其他保持不变，从<code>enableInlineShortcodes</code>开始都是来自demo的配置。</p>
<h2 id="languagesarchivessearch">languages、archives、search<a hidden class="anchor" aria-hidden="true" href="#languagesarchivessearch">#</a></h2>
<p>在demo的<code>languages</code>的配置段中，有<code>en</code>、<code>fr</code>和<code>fa</code>3块，它们使用的主题Mode不同，且包含部分国际化的配置，我们暂时只需要使用<code>en</code>，可以将<code>fr</code>和<code>fa</code>注释或者直接删除掉。</p>
<p><code>en</code>下最重要的就是<code>menu</code>配置了，它表示了导航栏显示的内容，demo中提供了最常用的4项，即<code>Archive</code>、<code>Search</code>、<code>Tags</code>及<code>Categories</code>。每项中包含一个<code>weight</code>，表示它们在导航栏中的显示顺序，越小越靠前。</p>
<p>根据<a href="https://github.com/adityatelange/hugo-PaperMod/wiki/Features">PaperMod官方使用文档</a>的描述，要使用<code>Archive</code>和<code>Search</code>，需要进行以下操作：</p>
<ul>
<li>
<p>在<code>content</code>下增加<code>archives.md</code>文件，具体位置如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">.
├── config.yml
├── content/
│   ├── archives.md   &lt;--- Create archive.md here
│   └── posts/
├── static/
└── themes/
    └── PaperMod/
</code></pre></td></tr></table>
</div>
</div><p><code>archives.md</code>内容为：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">---
title: &#34;Archive&#34;
layout: &#34;archives&#34;
url: &#34;/archives/&#34;
summary: archives
---
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>在<code>config.yml</code>中新增如下内容，demo中已经配置好的，这步可以跳过：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">outputs</span>:
    <span style="color:#f92672">home</span>:
        - <span style="color:#ae81ff">HTML</span>
        - <span style="color:#ae81ff">RSS</span>
        - <span style="color:#ae81ff">JSON</span> <span style="color:#75715e"># is necessary</span>
</code></pre></td></tr></table>
</div>
</div><p>同样在<code>content</code>新增一个<code>search.md</code>，内容如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">---
title: &#34;Search&#34; # in any language you want
layout: &#34;search&#34; # is necessary
# url: &#34;/archive&#34;
# description: &#34;Description for Search&#34;
summary: &#34;search&#34;
---
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>完成上述操作后，再看看效果：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_PaperMod_archives&#43;search.png#center" alt=""  />
</p>
<p>😏像那么回事了吧！</p>
<h2 id="params">params<a hidden class="anchor" aria-hidden="true" href="#params">#</a></h2>
<p><code>params</code>包括了PaperMod主题中的重要配置参数，下面举几个例子来进行说明，其他详细配置用法可以参照官方说明，也可以自己试试，大部分配置都是见名知意的。</p>
<h3 id="主题样式相关">主题样式相关<a hidden class="anchor" aria-hidden="true" href="#主题样式相关">#</a></h3>
<ul>
<li>
<p><code>defaultTheme</code>：设置白色主题或者黑色主题，设置为<code>auto</code>则表示跟随浏览器</p>
</li>
<li>
<p><code>disableThemeToggle:</code>：是否允许白色主题和黑色主题进行手动切换，设置成<code>true</code>则在网页顶部提供切换按钮</p>
</li>
<li>
<p><code>homeInfoParams</code>、<code>socialIcons</code>：这两参数配置的首页显示的内容，修改内容如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">homeInfoParams</span>:
        <span style="color:#f92672">Title</span>: <span style="color:#e6db74">&#34;Hello Hugo&#34;</span>
        <span style="color:#f92672">Content</span>: &gt;<span style="color:#e6db74">
</span><span style="color:#e6db74">            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, 
</span><span style="color:#e6db74">            - sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</span>            
<span style="color:#f92672">socialIcons</span>:
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">github</span>
          <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://github.com/adityatelange/hugo-PaperMod&#34;</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">telegram</span>
          <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;https://ko-fi.com/adityatelange&#34;</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">RsS</span>
          <span style="color:#f92672">url</span>: <span style="color:#e6db74">&#34;index.xml&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>结果如下：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_PaperMod_home_info.png#center" alt=""  />
</p>
<p>关于<code>socialIcons</code>参数，<a href="https://github.com/adityatelange/hugo-PaperMod/wiki/Icons">PaperMod官网</a>给出了具体的参照表。</p>
</li>
<li>
<p>网站图标相关参数如下，可以指定网络路径或本地路径：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">assets</span>:
    <span style="color:#f92672">favicon</span>: <span style="color:#e6db74">&#34;&lt;link / abs url&gt;&#34;</span>
    <span style="color:#f92672">favicon16x16</span>: <span style="color:#e6db74">&#34;&lt;link / abs url&gt;&#34;</span>
    <span style="color:#f92672">favicon32x32</span>: <span style="color:#e6db74">&#34;&lt;link / abs url&gt;&#34;</span>
    <span style="color:#f92672">apple_touch_icon</span>: <span style="color:#e6db74">&#34;&lt;link / abs url&gt;&#34;</span>
    <span style="color:#f92672">safari_pinned_tab</span>: <span style="color:#e6db74">&#34;&lt;link / abs url&gt;&#34;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="博客内容相关">博客内容相关<a hidden class="anchor" aria-hidden="true" href="#博客内容相关">#</a></h3>
<ul>
<li>
<p><code>ShowShareButtons</code>是否显示分享博客按钮，具体按钮的设定仍可参照<a href="https://github.com/adityatelange/hugo-PaperMod/wiki/Icons">PaperMod官网</a></p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_shareicons.png#center" alt=""  />
</p>
</li>
<li>
<p><code>ShowReadingTime</code>是否显示文章阅读时间</p>
</li>
<li>
<p><code>ShowBreadCrumbs</code> 是否显示面包屑</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_breadcrumbs.png#center" alt=""  />
</p>
</li>
<li>
<p><code>ShowCodeCopyButtons</code>是否显示代码复制按钮</p>
</li>
<li>
<p><code>ShowToc</code>是否显示文章目录</p>
</li>
<li>
<p>博客封面相关：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">cover</span>:
    <span style="color:#f92672">responsiveImages</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># 仅仅用在Page Bundle情况下，此处不讨论</span>
    <span style="color:#f92672">hidden</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># hide everywhere but not in structured data 是否在下面两种情况下显示</span>
    <span style="color:#f92672">hiddenInList</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># hide on list pages and home 是否在列表视图中显示</span>
    <span style="color:#f92672">hiddenInSingle</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># hide on single page 是否在单页视图中显示</span>
</code></pre></td></tr></table>
</div>
</div><p>为了测试，我将后面3个配置项全部设置为true，并在两篇测试博客中修改front matter(就是博客最上方的数据):</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">---
title: &#34;HelloHugo1&#34;
date: 2021-08-29T21:13:55+08:00
draft: 
cover:
    image: &#34;https://images.liyangjie.cn/Sekiro_01.jpg&#34;
    alt: &#34;替换文本&#34;
    caption: &#34;封面标题&#34;
---
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">---
title: &#34;HelloHugo2&#34;
date: 2021-08-29T21:18:38+08:00
draft: 
cover:
    image: &#34;https://images.liyangjie.cn/Sekiro_02.jpg&#34;
    alt: &#34;替换文本&#34;
    caption: &#34;封面标题&#34;
---
</code></pre></td></tr></table>
</div>
</div><p>再来看看结果，是不是有点味道了：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_list_with_cover.png#center" alt=""  />
</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_single_with_cover.png#center" alt=""  />
</p>
</li>
</ul>
<h2 id="分类相关">分类相关<a hidden class="anchor" aria-hidden="true" href="#分类相关">#</a></h2>
<p>默认情况下，Hugo支持<code>categories</code>、<code>tags</code>两个级别的分类，通过配置新增更多的分类：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">taxonomies</span>:
    <span style="color:#f92672">category</span>: <span style="color:#ae81ff">categories</span>
    <span style="color:#f92672">tag</span>: <span style="color:#ae81ff">tags</span>
    <span style="color:#f92672">series</span>: <span style="color:#ae81ff">series</span>
</code></pre></td></tr></table>
</div>
</div><p>这里又配置了一个<code>series</code>的分类维度，可以在博客的front matter中使用：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">---
title: &#34;HelloHugo1&#34;
date: 2021-08-29T21:13:55+08:00
draft: 
cover:
    image: &#34;https://images.liyangjie.cn/Sekiro_01.jpg&#34;
    alt: &#34;替换文本&#34;
    caption: &#34;封面标题&#34;
categories:
    - Hugo
tags:
    - Hugo
series:
    - Hugo
---
</code></pre></td></tr></table>
</div>
</div><p>这时候再进入网站的<code>Tags</code>导航项，就可以看到我们的标签和数量了：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_tags.png#center" alt=""  />
</p>
<h2 id="代码样式相关">代码样式相关<a hidden class="anchor" aria-hidden="true" href="#代码样式相关">#</a></h2>
<p>PaperMod0配置代码显示样式如下，这里是我个人使用的配置：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">markup</span>:
    <span style="color:#f92672">goldmark</span>:
        <span style="color:#f92672">renderer</span>:
            <span style="color:#f92672">unsafe</span>: <span style="color:#66d9ef">true</span>
    <span style="color:#f92672">highlight</span>:
        <span style="color:#75715e"># anchorLineNos: true</span>
        <span style="color:#f92672">codeFences</span>: <span style="color:#66d9ef">true</span>
        <span style="color:#f92672">guessSyntax</span>: <span style="color:#66d9ef">true</span>
        <span style="color:#f92672">lineNos</span>: <span style="color:#66d9ef">true</span>
        <span style="color:#75715e"># noClasses: false</span>
        <span style="color:#f92672">style</span>: <span style="color:#ae81ff">monokai</span>
</code></pre></td></tr></table>
</div>
</div><p>将<code>lineNos</code>设置为true后，会产生bug，官方提供了解决方案：</p>
<p>在<code>hugo-hello</code>，即工作目录下创建<code>assets/css/custom.css</code>文件，在文件中添加如下内容即可：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">chroma</span> {
    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">unset</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>现在往第一篇博客中添加一个代码段如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown"><span style="color:#e6db74">```java
</span><span style="color:#e6db74"></span><span style="color:#66d9ef">public</span> V <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>K key<span style="color:#f92672">,</span> V value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> putVal<span style="color:#f92672">(</span>hash<span style="color:#f92672">(</span>key<span style="color:#f92672">),</span> key<span style="color:#f92672">,</span> value<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
<span style="color:#e6db74">```</span>
</code></pre></td></tr></table>
</div>
</div><p>显示效果如图：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_code.png#center" alt=""  />
</p>
<h2 id="增加评论区">增加评论区<a hidden class="anchor" aria-hidden="true" href="#增加评论区">#</a></h2>
<p>我选择使用的是<code>Valine</code>，前置工作需要在LeanCloud上注册并创建应用，获取到相关的<code>AppID</code>和<code>AppKey</code>，具体流程请参照<a href="https://valine.js.org/quickstart.html">Valine官方网站</a>。</p>
<p>获取到这两个参数后，根据PaperMod官方文档的指示，创建<code>layouts/partials/comments.html</code>文件，<code>partials</code>路径不存在就自己创建，在文件中添加以下内容：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ $valinejs := resources.Get &#34;js/Valine.min.js&#34; }}
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{{ $valinejs.RelPermalink }}&#39;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;vcomments&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
&lt;<span style="color:#f92672">script</span>&gt;
    <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Valine</span>({
        <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#vcomments&#39;</span>,
        <span style="color:#a6e22e">appId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;这里是你的AppID&#39;</span>,
        <span style="color:#a6e22e">appKey</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;这里是你的AppKey&#39;</span>,
        <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;来都来了，说两句~&#39;</span>
    })
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></td></tr></table>
</div>
</div><p>随后创建<code>assets/js/Valine.min.js</code>，将<a href="https://cdnjs.cloudflare.com/ajax/libs/valine/1.4.14/Valine.min.js">CDN</a>中的内容全部拷贝到该文件中，保存。</p>
<p>在<code>config.yml</code>配置文件中设置评论开启即可，直接查找<code>comments</code>就可以定位到该配置的位置了，默认是关闭状态：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">comments</span>: <span style="color:#66d9ef">true</span>
</code></pre></td></tr></table>
</div>
</div><p>最后来看看效果：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_comments.png#center" alt=""  />
</p>
<p>配置入门大致就先讲到这里，下面简单介绍下我的站点部署方式。</p>
<h1 id="部署相关">部署相关<a hidden class="anchor" aria-hidden="true" href="#部署相关">#</a></h1>
<p>Hugo与Hexo类似，提供了直接部署为Github Pages的方式，比较简单，请直接移步到<a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">官网</a>。</p>
<p>但我自己想折腾折腾，以前使用Hexo的时候在自己的云主机上进行了部署，当时域名整了好久(国内域名，需要备案)，等域名搞定，黄花菜都凉了，所以这次刚好手头还保留着一台云主机，域名也一直在续费，就借此机会再折腾折腾。</p>
<h2 id="准备工作">准备工作<a hidden class="anchor" aria-hidden="true" href="#准备工作">#</a></h2>
<h3 id="软件环境准备">软件环境准备<a hidden class="anchor" aria-hidden="true" href="#软件环境准备">#</a></h3>
<ul>
<li>云主机的操作系统为<code>Debian 4.19.37-5+deb10u2 (2019-08-08) x86_64 GNU/Linux</code>，其他发行版也都可以</li>
<li>静态资源服务器<code>nginx/1.20.1</code></li>
<li><code>git/2.20.1</code></li>
</ul>
<h3 id="域名证书准备">域名、证书准备<a hidden class="anchor" aria-hidden="true" href="#域名证书准备">#</a></h3>
<ul>
<li>
<p>准备好一个域名，并DNS解析至云服务器，国内需要走备案审批流程，国外域名则不需要，大家自行斟酌</p>
</li>
<li>
<p>证书可选择各平台免费的DV证书，这里我随便找了一个腾讯云的SSL证书，品牌为<code>TrustAsia</code>，有效期一年</p>
</li>
</ul>
<h2 id="git仓库及钩子">git仓库及钩子<a hidden class="anchor" aria-hidden="true" href="#git仓库及钩子">#</a></h2>
<p>准备充分后，先在服务器上新建一个名为git的用户专门用于git同步：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo adduser git
</code></pre></td></tr></table>
</div>
</div><p>为了安全，修改分配给该用户的shell环境，编辑<code>/etc/passwd</code>文件，在末尾可以找到我们新增的git用户，修改后效果如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">... ...
<span style="color:#75715e"># 修改前为 git❌1001:1001:,,,:/home/git:/bin/bash</span>
git❌1001:1001:,,,:/home/git:/usr/bin/git-shell
</code></pre></td></tr></table>
</div>
</div><p>在自己的**客户端(Win10)**准备好SSH公钥，具体流程可以参照<a href="https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">Github教程</a>。完成后，将公钥拷贝至服务器<code>/home/git/.ssh/authorized_keys</code>文件里，该文件中若有其他公钥，则在末尾换行后添加即可。</p>
<p>在适当目录创建hugo的裸仓库：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git init --bare hello-hugo.git
</code></pre></td></tr></table>
</div>
</div><p>将该目录授权给刚创建好的git用户</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo chown -R git:git hello-hugo.git
</code></pre></td></tr></table>
</div>
</div><p>现在服务端的git仓库已经完成了，我们回到客户端。</p>
<p>进入<code>hello-hugo</code>目录，执行git初始化命令，将当前目录作为版本管理仓库：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git init
</code></pre></td></tr></table>
</div>
</div><p>然后将当前目录及其子目录下的所有文件纳入版本管理，并提交到git本地仓库：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git add .
git commit -m <span style="color:#e6db74">&#34;Hello, hugo&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>将当前仓库关联到我们上面创建好的远程仓库，由于已经配置了SSH公钥，可以使用ssh协议：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git remote add origin ssh://git@your.domain:port/path/to/hello-hugo.git
git push --set-upstream origin master
</code></pre></td></tr></table>
</div>
</div><p>远程仓库地址中的<code>git</code>为我们上面在服务器上创建的用户，<code>your.domai</code>表示你自己的域名，<code>port</code>为服务端的ssh端口，默认22可以不写，但是不为22的时候一定要使用如上的完整路径，此时<code>ssh://</code>不可省略。</p>
<p>我们已经完成了远程仓库和本地仓库的上下游关系关联。</p>
<p>为了方便每次提交文件后将静态目录自动部署到nginx，选择用git hook在<code>post-receive</code>阶段将仓库中的<code>/public</code>整体移动到nginx指定路径。</p>
<p>再切回到服务端，进入<code>hello-hugo.git</code>目录，可以看到该目录下有个<code>hooks</code>目录，里面存放的就是git支持的所有钩子，git官方在里面已经放了很多<code>.sample</code>结尾的示例，我们只选择使用<code>post-receive</code>钩子。创建<code>post-receive</code>文件，并使用vim进行修改，修改内容如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>git --work-tree<span style="color:#f92672">=</span>/usr/share/nginx/hello-hugo --git-dir<span style="color:#f92672">=</span>/path/to/hello-hugo.git checkout -f
</code></pre></td></tr></table>
</div>
</div><p>其中<code>--work-tree</code>为nginx中要配置的静态资源路径，<strong>请确保对于这个路径，我们上面创建的git用户需要有写入权限</strong>，具体命令参照上面的<code>hello-hugo.git</code>配置；<code>--git-dir</code>就是服务端的<code>hello-hugo.git</code>仓库路径。</p>
<p>在<strong>客户端</strong>我们新建一篇名为<code>HelloHugo3.md</code>的博客，记得把<code>draft</code>设置为false，然后往里面加点内容。同样在<strong>客户端</strong>进入<code>hello-hugo</code>目录，执行<code>hugo</code>命令，该命令的作用是将所有的资源生成为静态站点，并将站点存放在<code>hello-hugo</code>的<code>public</code>目录下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">hugo <span style="color:#75715e"># 生成站点</span>
</code></pre></td></tr></table>
</div>
</div><p>再执行git操作：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git add .
git commit -m <span style="color:#e6db74">&#34;publish site&#34;</span>
git push <span style="color:#75715e"># 这个客户端操作将会触发服务端执行post-receive脚本</span>
</code></pre></td></tr></table>
</div>
</div><p>一切正常的话，服务端的<code>/usr/share/nginx/hello-hugo</code>目录下将会和我们的客户端工作目录一致(空目录和<code>submodule</code>不会被git纳入版本控制，因此<code>data</code>、<code>static</code>、<code>themes</code>目录不会同步到服务器)。</p>
<h2 id="nginx配置">nginx配置<a hidden class="anchor" aria-hidden="true" href="#nginx配置">#</a></h2>
<p>上传SSL证书至<code>/etc/nginx/cert</code>目录下，nginx使用的格式为：</p>
<ul>
<li><code>your.domain_bundle.crt </code></li>
<li><code>your.domain.key</code></li>
</ul>
<p>进入nginx配置目录<code>/etc/nginx/conf.d</code>，新建<code>hello-hugo.conf</code>文件，内容如下，端口号和路径可以根据实际情况进行修改，保证没有被占用：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">server</span> {
    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">443</span> <span style="color:#e6db74">ssl</span>; <span style="color:#75715e"># https端口号，默认为443，可以自己修改
</span><span style="color:#75715e"></span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">your.domain</span>; <span style="color:#75715e"># 域名，与申请证书时候使用的域名要一致
</span><span style="color:#75715e"></span>
    <span style="color:#75715e"># https相关配置
</span><span style="color:#75715e"></span>    <span style="color:#f92672">ssl_certificate</span>  <span style="color:#e6db74">cert/your.domain_bundle.crt</span>;
    <span style="color:#f92672">ssl_certificate_key</span> <span style="color:#e6db74">cert/your.domain.key</span>; 
    <span style="color:#f92672">ssl_session_timeout</span> <span style="color:#ae81ff">5m</span>;
    <span style="color:#f92672">ssl_ciphers</span> <span style="color:#e6db74">ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4</span>;
    <span style="color:#f92672">ssl_protocols</span> <span style="color:#e6db74">TLSv1</span> <span style="color:#e6db74">TLSv1.1</span> <span style="color:#e6db74">TLSv1.2</span>;
    <span style="color:#f92672">ssl_prefer_server_ciphers</span> <span style="color:#66d9ef">on</span>;

    <span style="color:#75715e"># 这个路径就是上面我们的git hook指定的路径，再接上一个public
</span><span style="color:#75715e"></span>    <span style="color:#f92672">root</span> <span style="color:#e6db74">/usr/share/nginx/hello-hugo/public</span>;

    <span style="color:#75715e"># 默认查找路径下的index.html
</span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
        <span style="color:#f92672">index</span> <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span>;
    }

    <span style="color:#75715e"># 默认的404页面
</span><span style="color:#75715e"></span>    <span style="color:#f92672">error_page</span> <span style="color:#ae81ff">404</span> <span style="color:#e6db74">/404.html</span>; 
        <span style="color:#f92672">location</span> = <span style="color:#e6db74">/40x.html</span> {
    }
}

<span style="color:#66d9ef">server</span> {
    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>; <span style="color:#75715e"># 端口号可以自己修改
</span><span style="color:#75715e"></span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">your.domain</span>; <span style="color:#75715e"># 域名，与申请证书时候使用的域名要一致
</span><span style="color:#75715e"></span>
    <span style="color:#75715e"># 将http重定向到https，host后面的端口号与上一个server的端口号保持一致即可
</span><span style="color:#75715e"></span>    <span style="color:#f92672">return</span> <span style="color:#ae81ff">301</span> <span style="color:#e6db74">https://</span>$host:443$request_uri;  
}

</code></pre></td></tr></table>
</div>
</div><p>最后，开启nginx：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">nginx
</code></pre></td></tr></table>
</div>
</div><p>客户端打开浏览器，输入你的域名(默认80端口可以不写，否则必须写)，能够成功跳转到<code>https</code>，地址栏能够显示小锁(小锁表示网站使用的证书是安全的)就表示已经成功了：</p>
<p><img loading="lazy" src="http://images.liyangjie.cn/image/Hugo_nginx_success.png" alt=""  />
</p>
<h1 id="留个坑">留个坑<a hidden class="anchor" aria-hidden="true" href="#留个坑">#</a></h1>
<p>至此，Hugo从入门部署已经完成了，关于Hugo的使用细节没有覆盖到，主要是我自己也才刚开始使用，后续会慢慢积累和整理，争取把记录生活的习惯坚持下去，共勉😎。</p>


  </div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.liyangjie.cn:4443/tags/hugo/">Hugo</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.liyangjie.cn:4443/posts/hashmap%E5%9F%BA%E7%A1%80/">
    <span class="title">« Prev Page</span>
    <br>
    <span>HashMap基础</span>
  </a>
</nav>

  </footer>
<script src='/js/Valine.min.js'></script>
<div id="vcomments" style="margin-top: 2em;"></div>
<script>
    const emojiCDNAcfun = 'http://images.liyangjie.cn/emoji/acfun';
    const emojiMapsAcfun = {
            acfun_0: '01.png',
            acfun_1: '02.png',
            acfun_2: '03.png',
            acfun_3: '04.png',
            acfun_4: '05.png',
            acfun_5: '06.png',
            acfun_6: '07.png',
            acfun_7: '08.png',
            acfun_8: '09.png',
            acfun_9: '10.png',
            acfun_10: '1001.png',
            acfun_11: '1002.png',
            acfun_12: '1003.png',
            acfun_13: '1004.png',
            acfun_14: '1005.png',
            acfun_15: '1006.png',
            acfun_16: '1007.png',
            acfun_17: '1008.png',
            acfun_18: '1009.png',
            acfun_19: '1010.png',
            acfun_20: '1011.png',
            acfun_21: '1012.png',
            acfun_22: '1013.png',
            acfun_23: '1014.png',
            acfun_24: '1015.png',
            acfun_25: '1016.png',
            acfun_26: '1017.png',
            acfun_27: '1018.png',
            acfun_28: '1019.png',
            acfun_29: '1020.png',
            acfun_30: '1021.png',
            acfun_31: '1022.png',
            acfun_32: '1023.png',
            acfun_33: '1024.png',
            acfun_34: '1025.png',
            acfun_35: '1026.png',
            acfun_36: '1027.png',
            acfun_37: '1028.png',
            acfun_38: '1029.png',
            acfun_39: '1030.png',
            acfun_40: '1031.png',
            acfun_41: '1032.png',
            acfun_42: '1033.png',
            acfun_43: '1034.png',
            acfun_44: '1035.png',
            acfun_45: '1036.png',
            acfun_46: '1037.png',
            acfun_47: '1038.png',
            acfun_48: '1039.png',
            acfun_49: '1040.png',
            acfun_50: '11.png',
            acfun_51: '12.png',
            acfun_52: '13.png',
            acfun_53: '14.png',
            acfun_54: '15.png',
            acfun_55: '16.png',
            acfun_56: '17.png',
            acfun_57: '18.png',
            acfun_58: '19.png',
            acfun_59: '20.png',
            acfun_60: '2001.png',
            acfun_61: '2002.png',
            acfun_62: '2003.png',
            acfun_63: '2004.png',
            acfun_64: '2005.png',
            acfun_65: '2006.png',
            acfun_66: '2007.png',
            acfun_67: '2008.png',
            acfun_68: '2009.png',
            acfun_69: '2010.png',
            acfun_70: '2011.png',
            acfun_71: '2012.png',
            acfun_72: '2013.png',
            acfun_73: '2014.png',
            acfun_74: '2015.png',
            acfun_75: '2016.png',
            acfun_76: '2017.png',
            acfun_77: '2018.png',
            acfun_78: '2019.png',
            acfun_79: '2020.png',
            acfun_80: '2021.png',
            acfun_81: '2022.png',
            acfun_82: '2023.png',
            acfun_83: '2024.png',
            acfun_84: '2025.png',
            acfun_85: '2026.png',
            acfun_86: '2027.png',
            acfun_87: '2028.png',
            acfun_88: '2029.png',
            acfun_89: '2030.png',
            acfun_90: '2031.png',
            acfun_91: '2032.png',
            acfun_92: '2033.png',
            acfun_93: '2034.png',
            acfun_94: '2035.png',
            acfun_95: '2036.png',
            acfun_96: '2037.png',
            acfun_97: '2038.png',
            acfun_98: '2039.png',
            acfun_99: '2040.png',
            acfun_100: '2041.png',
            acfun_101: '2042.png',
            acfun_102: '2043.png',
            acfun_103: '2044.png',
            acfun_104: '2045.png',
            acfun_105: '2046.png',
            acfun_106: '2047.png',
            acfun_107: '2048.png',
            acfun_108: '2049.png',
            acfun_109: '2050.png',
            acfun_110: '2051.png',
            acfun_111: '2052.png',
            acfun_112: '2053.png',
            acfun_113: '2054.png',
            acfun_114: '2055.png',
            acfun_115: '21.png',
            acfun_116: '22.png',
            acfun_117: '23.png',
            acfun_118: '24.png',
            acfun_119: '25.png',
            acfun_120: '26.png',
            acfun_121: '27.png',
            acfun_122: '28.png',
            acfun_123: '29.png',
            acfun_124: '30.png',
            acfun_125: '31.png',
            acfun_126: '32.png',
            acfun_127: '33.png',
            acfun_128: '34.png',
            acfun_129: '35.png',
            acfun_130: '36.png',
            acfun_131: '37.png',
            acfun_132: '38.png',
            acfun_133: '39.png',
            acfun_134: '40.png',
            acfun_135: '41.png',
            acfun_136: '42.png',
            acfun_137: '43.png',
            acfun_138: '44.png',
            acfun_139: '45.png',
            acfun_140: '46.png',
            acfun_141: '47.png',
            acfun_142: '48.png',
            acfun_143: '49.png',
            acfun_144: '50.png',
            acfun_145: '51.png',
            acfun_146: '52.png',
            acfun_147: '53.png',
            acfun_148: '54.png',
            acfun_149: '76web.gif',
            acfun_150: 'DVAweb.gif',
            acfun_151: '半藏web.gif',
            acfun_152: '卢西奥web.gif',
            acfun_153: '大锤web.gif',
            acfun_154: '天使web.gif',
            acfun_155: '安娜web.gif',
            acfun_156: '寡妇web.gif',
            acfun_157: '托比昂web.gif',
            acfun_158: '查莉雅web.gif',
            acfun_159: '死神web.gif',
            acfun_160: '法鸡web.gif',
            acfun_161: '源氏web.gif',
            acfun_162: '狂鼠web.gif',
            acfun_163: '猎空web.gif',
            acfun_164: '猩猩web.gif',
            acfun_165: '禅雅塔web.gif',
            acfun_166: '秩序web.gif',
            acfun_167: '美web.gif',
            acfun_168: '路霸web.gif',
            acfun_169: '麦克雷web.gif'
        };
        const emojiCDNBlibli = 'http://images.liyangjie.cn/emoji/blibli/';
        const emojiMapsBlibli = {
            'doge': 'doge.gif',
            '亲亲': '亲亲.gif',
            '偷笑': '偷笑.gif',
            '再见': '再见.gif',
            '发怒': '发怒.gif',
            '发财': '发财.gif',
            '可爱': '可爱.gif',
            '吐血': '吐血.gif',
            '呆': '呆.gif',
            '呕吐': '呕吐.gif',
            '困': '困.gif',
            '坏笑': '坏笑.gif',
            '大佬': '大佬.gif',
            '大哭': '大哭.gif',
            '委屈': '委屈.gif',
            '害羞': '害羞.gif',
            '尴尬': '尴尬.gif',
            '微笑': '微笑.gif',
            '思考': '思考.gif',
            '惊吓': '惊吓.gif',
            '打脸': '打脸.gif',
            '抓狂': '抓狂.gif',
            '抠鼻子': '抠鼻子.gif',
            '斜眼笑': '斜眼笑.gif',
            '无奈': '无奈.gif',
            '晕': '晕.gif',
            '流汗': '流汗.gif',
            '流鼻血': '流鼻血.gif',
            '点赞': '点赞.gif',
            '生气': '生气.gif',
            '生病': '生病.gif',
            '疑问': '疑问.gif',
            '白眼': '白眼.gif',
            '睡着': '睡着.gif',
            '笑哭': '笑哭.gif',
            '腼腆': '腼腆.gif',
            '色': '色.gif',
            '调皮': '调皮.gif',
            '鄙视': '鄙视.gif',
            '闭嘴': '闭嘴.gif',
            '难过': '难过.gif',
            '馋': '馋.gif',
            '黑人问号': '黑人问号.gif',
            '鼓掌': '鼓掌.gif'
        };
    new Valine({
        el: '#vcomments',
        appId: 'L2ATQDtxyuWNWuKWKkigYek5-gzGzoHsz',
        appKey: 'iEwNFD3GOrDEHjqnwhEtHSp8',
        placeholder: '来都来了，说两句~',
        emojiCDN: emojiCDNBlibli,
        emojiMaps: emojiMapsBlibli
    })
</script>

</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://www.liyangjie.cn:4443/">仙羡小站</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>
<script src='/js/webfontloader.min.js'>
</script>
<script>
    WebFont.load({
        custom: {
            families: ['CascadiaCodePL'],
        },
        classes: false,
        active() {
            document.querySelectorAll("code").forEach(ele => ele.style.fontFamily = 'CascadiaCodePL');
        }
    });
</script>


<footer class="footer">
<a href="https://beian.miit.gov.cn/" target="_blank">鄂ICP备16007812号-1</a>
</footer>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
